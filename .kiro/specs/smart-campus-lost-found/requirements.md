# 需求文档

## 简介

智能校园失物招领平台是一个基于Spring Boot框架的综合性解决方案，旨在解决传统失物招领方式中信息传播效率低、匹配成功率低等问题。该平台整合AI图像识别、LBS地理服务、智能推荐算法等技术，为校园用户提供便捷的失物招领服务。系统支持Web端和移动端访问，实现用户管理、失物信息发布、智能匹配推荐、积分激励体系等核心功能模块。

## 术语表

- **平台**: 智能校园失物招领平台系统
- **用户**: 使用平台的校园人员，包括学生、教职工等
- **失物信息**: 用户发布的丢失物品或拾获物品的详细描述记录
- **AI图像识别**: 基于百度AI开放平台的图像分析服务，用于自动识别物品类别和特征
- **LBS地理服务**: 基于高德地图API的位置服务，用于记录和展示物品丢失/拾获地点
- **智能匹配**: 基于物品特征、时间、地点等多维度的自动匹配推荐算法
- **积分**: 用户通过平台活动获得的虚拟奖励，用于激励用户参与

## 需求列表

### 需求1：用户管理

**用户故事:** 作为校园用户，我希望能够注册、登录并管理我的个人账户，以便使用平台的各项功能。

#### 验收标准

1. WHEN 用户提交包含学号/工号、姓名、手机号、密码的注册信息 THEN 平台 SHALL 验证信息格式并创建新用户账户
2. WHEN 用户使用学号/工号和密码进行登录 THEN 平台 SHALL 验证凭据并返回认证令牌
3. WHEN 用户请求修改个人信息（头像、手机号、密码） THEN 平台 SHALL 验证用户身份后更新对应信息
4. WHEN 用户连续输入错误密码超过5次 THEN 平台 SHALL 锁定该账户15分钟
5. WHEN 管理员查询用户列表 THEN 平台 SHALL 返回分页的用户信息列表，支持按学号、姓名筛选

### 需求2：失物信息发布

**用户故事:** 作为用户，我希望能够发布丢失物品或拾获物品的信息，以便寻找失主或找回物品。

#### 验收标准

1. WHEN 用户提交失物/招领信息（包含标题、描述、图片、丢失/拾获时间、地点） THEN 平台 SHALL 创建信息记录并存储至数据库
2. WHEN 用户上传物品图片 THEN 平台 SHALL 调用AI图像识别服务自动识别物品类别和特征标签
3. WHEN 用户选择丢失/拾获地点 THEN 平台 SHALL 调用LBS服务获取并存储精确的地理坐标信息
4. WHEN 用户编辑已发布的信息 THEN 平台 SHALL 验证用户为信息发布者后允许修改
5. WHEN 用户删除已发布的信息 THEN 平台 SHALL 将信息状态标记为已删除而非物理删除
6. WHEN 用户查看信息详情 THEN 平台 SHALL 返回完整的信息内容并增加浏览次数计数

### 需求3：AI图像识别

**用户故事:** 作为用户，我希望系统能够自动识别我上传的物品图片，以便快速准确地描述物品特征。

#### 验收标准

1. WHEN 用户上传物品图片 THEN 平台 SHALL 调用百度AI图像识别API分析图片内容
2. WHEN AI识别完成 THEN 平台 SHALL 返回物品类别（如电子设备、证件、钥匙等）和置信度分数
3. WHEN AI识别出物品特征 THEN 平台 SHALL 自动生成物品颜色、品牌、型号等标签
4. IF AI识别服务调用失败 THEN 平台 SHALL 记录错误日志并允许用户手动选择物品类别
5. WHEN 图片文件大小超过5MB THEN 平台 SHALL 自动压缩图片后再进行识别处理

### 需求4：LBS地理服务

**用户故事:** 作为用户，我希望能够在地图上标记物品丢失或拾获的位置，以便其他用户了解具体地点。

#### 验收标准

1. WHEN 用户在地图上选择位置 THEN 平台 SHALL 获取该位置的经纬度坐标和地址描述
2. WHEN 用户查看信息列表 THEN 平台 SHALL 在地图上展示所有失物/招领信息的位置标记
3. WHEN 用户搜索附近的失物信息 THEN 平台 SHALL 基于用户当前位置返回指定半径范围内的信息列表
4. WHEN 用户点击地图上的位置标记 THEN 平台 SHALL 显示该位置对应的失物/招领信息摘要
5. WHEN 用户授权位置权限 THEN 平台 SHALL 自动获取用户当前位置作为默认搜索中心点

### 需求5：智能匹配推荐

**用户故事:** 作为用户，我希望系统能够自动匹配可能相关的失物和招领信息，以便提高找回物品的成功率。

#### 验收标准

1. WHEN 新的失物/招领信息发布 THEN 平台 SHALL 基于物品类别、特征标签、时间、地点计算匹配度分数
2. WHEN 匹配度分数超过设定阈值（70%） THEN 平台 SHALL 向双方用户发送匹配通知
3. WHEN 用户查看信息详情 THEN 平台 SHALL 展示相关度最高的前10条匹配信息
4. WHEN 用户确认匹配成功 THEN 平台 SHALL 更新双方信息状态为已找回并记录匹配历史
5. WHEN 用户反馈匹配不准确 THEN 平台 SHALL 记录反馈数据用于优化匹配算法

### 需求6：消息通知

**用户故事:** 作为用户，我希望能够及时收到与我相关的通知消息，以便快速响应匹配结果或用户留言。

#### 验收标准

1. WHEN 系统检测到匹配信息 THEN 平台 SHALL 向相关用户发送站内消息通知
2. WHEN 其他用户对我的信息进行留言 THEN 平台 SHALL 向我发送留言通知
3. WHEN 用户查看消息列表 THEN 平台 SHALL 返回按时间倒序排列的消息列表，区分已读和未读状态
4. WHEN 用户点击消息 THEN 平台 SHALL 将消息标记为已读并跳转至相关内容页面
5. WHEN 用户启用推送通知 THEN 平台 SHALL 通过WebSocket实时推送新消息

### 需求7：积分激励体系

**用户故事:** 作为用户，我希望通过参与平台活动获得积分奖励，以便激励我积极帮助他人找回失物。

#### 验收标准

1. WHEN 用户成功帮助他人找回物品 THEN 平台 SHALL 为该用户增加50积分
2. WHEN 用户发布有效的招领信息 THEN 平台 SHALL 为该用户增加10积分
3. WHEN 用户每日首次登录 THEN 平台 SHALL 为该用户增加2积分
4. WHEN 用户查看积分明细 THEN 平台 SHALL 返回积分变动历史记录列表
5. WHEN 用户查看积分排行榜 THEN 平台 SHALL 返回按积分总数降序排列的前100名用户列表

### 需求8：信息搜索与筛选

**用户故事:** 作为用户，我希望能够快速搜索和筛选失物/招领信息，以便找到与我相关的内容。

#### 验收标准

1. WHEN 用户输入关键词搜索 THEN 平台 SHALL 在标题、描述、标签中进行全文检索并返回匹配结果
2. WHEN 用户选择筛选条件（物品类别、时间范围、地点范围、状态） THEN 平台 SHALL 返回符合条件的信息列表
3. WHEN 用户切换排序方式（时间、距离、匹配度） THEN 平台 SHALL 按指定方式重新排序结果列表
4. WHEN 搜索结果超过20条 THEN 平台 SHALL 进行分页处理，每页显示20条记录
5. WHEN 用户搜索无结果 THEN 平台 SHALL 显示空结果提示并推荐相关热门信息

### 需求9：数据统计与管理

**用户故事:** 作为管理员，我希望能够查看平台运营数据和管理用户内容，以便监控平台运行状况。

#### 验收标准

1. WHEN 管理员访问数据统计页面 THEN 平台 SHALL 展示用户总数、信息总数、匹配成功率等核心指标
2. WHEN 管理员查看信息列表 THEN 平台 SHALL 返回所有信息记录，支持按状态、时间、举报次数筛选
3. WHEN 管理员审核被举报的信息 THEN 平台 SHALL 提供通过、删除、警告发布者等操作选项
4. WHEN 管理员封禁违规用户 THEN 平台 SHALL 禁止该用户登录并标记账户状态为已封禁
5. WHEN 管理员导出数据报表 THEN 平台 SHALL 生成包含指定时间范围内运营数据的Excel文件

### 需求10：系统安全与性能

**用户故事:** 作为系统管理者，我希望平台具备良好的安全性和性能，以便保障用户数据安全和使用体验。

#### 验收标准

1. WHEN 用户请求敏感操作 THEN 平台 SHALL 验证JWT令牌的有效性和用户权限
2. WHEN 用户上传文件 THEN 平台 SHALL 验证文件类型和大小，仅允许图片格式且单文件不超过10MB
3. WHEN 系统检测到异常请求频率 THEN 平台 SHALL 触发限流机制，限制单IP每分钟最多100次请求
4. WHEN 用户密码存储 THEN 平台 SHALL 使用BCrypt算法进行加密存储
5. WHILE 系统运行期间 平台 SHALL 将热点数据缓存至Redis，缓存命中率目标达到80%以上
